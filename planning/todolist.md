# 开发任务清单 (TODO List)

## 📋 项目概览

**项目名称**：找到想做的事 - 智能引导系统  
**开发阶段**：MVP验证阶段  
**架构模式**：简化架构（simple）  
**并发要求**：2-5用户  

---

## 🎯 开发原则

1. **测试驱动**：所有可独立测试的模块都要有测试用例
2. **接口优先**：先定义接口，再实现功能
3. **渐进开发**：从核心功能开始，逐步扩展
4. **风险控制**：高风险模块优先验证
5. **可维护性**：代码清晰，文档完善

---

## 📁 测试目录结构

```
test/
├── backend/
│   ├── core/
│   │   ├── llmapi/          # LLM API测试
│   │   ├── asr/             # ASR API测试
│   │   ├── tts/             # TTS API测试
│   │   ├── agent/           # 智能体框架测试
│   │   ├── knowledge/       # 知识检索测试
│   │   ├── database/        # 数据库测试
│   │   └── cache/           # 缓存测试
│   ├── api/
│   │   └── v1/              # API接口测试
│   └── services/            # 业务逻辑测试
├── frontend/
│   ├── components/          # 组件测试
│   ├── pages/              # 页面测试
│   └── services/           # 服务测试
└── integration/            # 集成测试
```

---

## 🚀 开发阶段划分

### Phase 0: 项目初始化与基础设施
### Phase 1: 核心AI服务（LLM/ASR/TTS）
### Phase 2: 数据层与知识库
### Phase 3: 智能体框架
### Phase 4: 业务逻辑层
### Phase 5: API接口层
### Phase 6: 前端基础
### Phase 7: 前端核心功能
### Phase 8: 集成与优化

---

## Phase 0: 项目初始化与基础设施

### 0.1 项目结构搭建 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：无  
**预计时间**：1天

**任务**：
- [√] 创建项目目录结构
- [√] 初始化Git仓库
- [√] 配置开发环境（Python虚拟环境、Node.js环境）
- [√] 创建基础配置文件（.env.example, .gitignore等）
- [√] 设置代码规范（black, flake8, eslint等）

**测试**：
- [√] 验证目录结构正确
- [ ] 验证环境配置成功（需要安装依赖）

**输出**：
- 完整的项目目录结构
- 开发环境配置文档

---

### 0.2 数据库设计与初始化 ⭐ P0
**优先级**：最高  
**风险**：中  
**依赖**：0.1  
**预计时间**：2天

**任务**：
- [√] 设计数据库Schema（SQLite）
- [√] 创建数据库迁移脚本（Alembic）
- [√] 初始化数据库表结构
- [√] 创建数据模型（SQLAlchemy）
- [√] 设计JSON文件存储结构（对话记录）
- [√] 实现对话记录文件管理器

**测试**：
- [√] 单元测试：数据库连接
- [√] 单元测试：数据模型CRUD
- [√] 单元测试：对话记录文件读写
- [ ] 集成测试：数据库迁移（需要运行alembic）

**输出**：
- 数据库Schema文档
- 数据模型代码
- 对话记录文件管理器

**风险评估**：
- 风险：数据模型设计不合理
- 缓解：先设计，评审后再实现

---

### 0.3 配置管理系统 ⭐ P0
**优先级**：高  
**风险**：低  
**依赖**：0.1  
**预计时间**：1天

**任务**：
- [√] 实现配置管理模块（config/settings.py）
- [√] 实现架构配置（architecture.py）
- [√] 实现引导策略配置（guide_config.py）
- [√] 实现语音配置（audio_config.py）
- [√] 环境变量管理

**测试**：
- [√] 单元测试：配置读取
- [√] 单元测试：配置验证
- [√] 单元测试：架构模式切换

**输出**：
- 配置管理模块
- 配置文件模板

---

## Phase 1: 核心AI服务（LLM/ASR/TTS）

### 1.1 LLM API接口设计与实现 ⭐ P0
**优先级**：最高  
**风险**：高（外部依赖）  
**依赖**：0.3  
**预计时间**：3天

**任务**：
- [√] 设计LLM API统一接口（Base类）
- [√] 实现OpenAI Provider
- [ ] 实现本地模型Provider（可选，降级方案）
- [√] 实现错误处理和重试机制
- [√] 实现流式输出支持
- [√] 实现Token计数和成本估算

**测试**：
- [√] 单元测试：接口定义
- [√] 单元测试：OpenAI Provider调用
- [√] 单元测试：错误处理
- [√] 单元测试：流式输出
- [ ] 集成测试：端到端LLM调用（需要API密钥）

**输出**：
- LLM API模块
- 测试用例和测试脚本

**风险评估**：
- 风险：API调用失败、成本控制
- 缓解：实现降级方案、成本监控

---

### 1.2 ASR API接口设计与实现 ⭐ P1
**优先级**：高（AUDIO_MODE控制）  
**风险**：中  
**依赖**：0.3  
**预计时间**：2天

**任务**：
- [√] 设计ASR API统一接口（Base类）
- [√] 实现OpenAI Whisper Provider
- [ ] 实现本地Whisper Provider（可选）
- [ ] 实现Web Speech API集成（前端）
- [ ] 实现音频格式转换
- [√] 实现错误处理

**测试**：
- [√] 单元测试：接口定义
- [√] 单元测试：OpenAI Whisper调用
- [ ] 单元测试：音频格式转换
- [ ] 集成测试：端到端ASR流程（需要API密钥）

**输出**：
- ASR API模块
- 测试用例和测试脚本

**注意**：AUDIO_MODE=False时，接口返回403

---

### 1.3 TTS API接口设计与实现 ⭐ P1
**优先级**：高（AUDIO_MODE控制）  
**风险**：中  
**依赖**：0.3  
**预计时间**：2天

**任务**：
- [√] 设计TTS API统一接口（Base类）
- [√] 实现OpenAI TTS Provider
- [ ] 实现本地TTS Provider（pyttsx3/gTTS）
- [ ] 实现音频格式处理
- [√] 实现错误处理

**测试**：
- [√] 单元测试：接口定义
- [√] 单元测试：OpenAI TTS调用
- [ ] 单元测试：本地TTS调用
- [ ] 集成测试：端到端TTS流程（需要API密钥）

**输出**：
- TTS API模块
- 测试用例和测试脚本

**注意**：AUDIO_MODE=False时，接口返回403

---

## Phase 2: 数据层与知识库

### 2.1 知识库加载模块 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：0.1  
**预计时间**：2天

**任务**：
- [√] 实现CSV文件加载器
- [√] 实现Markdown文件解析器（question.md）
- [√] 实现知识库数据结构
- [√] 实现知识库缓存（内存）
- [√] 实现数据验证

**测试**：
- [√] 单元测试：CSV加载
- [√] 单元测试：Markdown解析
- [√] 单元测试：数据结构验证
- [ ] 集成测试：完整知识库加载（需要实际文件）

**输出**：
- 知识库加载模块
- 测试用例和测试脚本

---

### 2.2 知识检索模块（关键词匹配） ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：2.1  
**预计时间**：2天

**任务**：
- [√] 实现关键词提取
- [√] 实现关键词匹配算法
- [√] 实现结果排序
- [√] 实现多类别检索
- [√] 实现检索结果格式化

**测试**：
- [√] 单元测试：关键词提取
- [√] 单元测试：匹配算法
- [√] 单元测试：排序算法
- [ ] 集成测试：端到端检索（需要实际文件）

**输出**：
- 知识检索模块（关键词）
- 测试用例和测试脚本

---

### 2.3 向量存储接口（保留，暂不实现） ⭐ P2
**优先级**：低  
**风险**：低  
**依赖**：2.1  
**预计时间**：0.5天（只定义接口）

**任务**：
- [ ] 定义向量存储基类接口
- [ ] 定义内存向量存储接口（占位）
- [ ] 定义Chroma向量存储接口（占位）
- [ ] 定义FAISS向量存储接口（占位）
- [ ] 实现接口切换逻辑（当前只返回内存实现）

**测试**：
- [ ] 单元测试：接口定义
- [ ] 单元测试：接口切换逻辑

**输出**：
- 向量存储接口定义
- 占位实现

**注意**：暂不实现具体功能，只保留接口

---

### 2.4 数据库操作层 ⭐ P0
**优先级**：最高  
**风险**：中  
**依赖**：0.2  
**预计时间**：3天

**任务**：
- [√] 实现用户数据操作（user_db.py）
- [√] 实现历史数据操作（history_db.py）
- [√] 实现知识数据操作（knowledge_db.py）
- [√] 实现数据库连接管理
- [√] 实现事务处理

**测试**：
- [√] 单元测试：用户CRUD
- [√] 单元测试：会话CRUD
- [√] 单元测试：回答CRUD
- [√] 单元测试：进度CRUD
- [√] 集成测试：数据库操作

**输出**：
- 数据库操作层
- 测试用例和测试脚本

**注意**：已在Phase 0.2中完成

---

### 2.5 对话记录文件管理 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：0.2  
**预计时间**：2天

**任务**：
- [√] 实现对话记录文件管理器
- [√] 实现分类存储（main_flow/guidance/clarification/other）
- [√] 实现追加写入
- [√] 实现读取和查询
- [ ] 实现文件归档（可选）

**测试**：
- [√] 单元测试：文件创建和写入
- [√] 单元测试：文件读取
- [√] 单元测试：分类存储
- [√] 单元测试：追加写入
- [√] 集成测试：完整对话记录流程

**输出**：
- 对话记录文件管理器
- 测试用例和测试脚本

**注意**：已在Phase 0.2中完成

---

## Phase 3: 智能体框架

### 3.1 LangGraph基础框架搭建 ⭐ P0
**优先级**：最高  
**风险**：高（新技术）  
**依赖**：1.1  
**预计时间**：3天

**任务**：
- [√] 安装和配置LangGraph
- [√] 设计AgentState（状态定义）
- [√] 实现基础状态图结构
- [√] 实现节点基类
- [√] 实现边定义
- [√] 实现状态图编译

**测试**：
- [√] 单元测试：状态定义
- [ ] 单元测试：节点创建
- [ ] 单元测试：边连接
- [ ] 单元测试：状态图编译
- [ ] 集成测试：简单状态图运行（需要LLM API）

**输出**：
- LangGraph基础框架
- 测试用例和测试脚本

**风险评估**：
- 风险：LangGraph学习曲线
- 缓解：先实现简单示例，逐步扩展

---

### 3.2 ReAct范式实现 ⭐ P0
**优先级**：最高  
**风险**：高  
**依赖**：3.1, 1.1  
**预计时间**：4天

**任务**：
- [√] 实现推理节点（reasoning_node）
- [√] 实现行动节点（action_node）
- [√] 实现观察节点（observation_node）
- [√] 实现判断节点（should_continue）
- [√] 实现ReAct循环控制
- [√] 实现最大迭代次数限制

**测试**：
- [ ] 单元测试：推理节点
- [ ] 单元测试：行动节点
- [ ] 单元测试：观察节点
- [ ] 单元测试：循环控制
- [ ] 集成测试：完整ReAct循环（需要LLM API）

**输出**：
- ReAct范式实现
- 测试用例和测试脚本

**风险评估**：
- 风险：循环控制逻辑复杂
- 缓解：先实现简单版本，逐步完善

---

### 3.3 工具（Tools）定义与实现 ⭐ P0
**优先级**：最高  
**风险**：中  
**依赖**：3.2, 2.2  
**预计时间**：4天

**任务**：
- [√] 实现工具基类（BaseAgentTool）
- [ ] 实现概念解释工具（ConceptExplainTool）
- [√] 实现问题引导工具（GuideTool）
- [√] 实现示例推荐工具（ExampleTool）
- [√] 实现内容检索工具（SearchTool）
- [ ] 实现主动引导工具（ProactiveGuideTool）
- [√] 实现工具注册机制

**测试**：
- [ ] 单元测试：工具基类
- [ ] 单元测试：每个工具独立测试
- [ ] 单元测试：工具注册
- [ ] 集成测试：工具调用流程

**输出**：
- 工具模块
- 测试用例和测试脚本

---

### 3.4 上下文管理模块 ⭐ P0
**优先级**：最高  
**风险**：中  
**依赖**：2.4, 2.5  
**预计时间**：2天

**任务**：
- [√] 实现上下文管理器（ContextManager）
- [√] 实现用户信息获取
- [√] 实现工作履历获取
- [√] 实现已回答问题获取
- [√] 实现对话历史获取
- [√] 实现上下文构建（当前：直接拼接）
- [√] 保留扩展接口

**测试**：
- [ ] 单元测试：用户信息获取
- [ ] 单元测试：工作履历获取
- [ ] 单元测试：已回答问题获取
- [ ] 单元测试：对话历史获取
- [ ] 单元测试：上下文构建
- [ ] 集成测试：完整上下文管理（需要数据库）

**输出**：
- 上下文管理模块
- 测试用例和测试脚本

---

## Phase 4: 业务逻辑层

### 4.1 用户认证服务 ⭐ P0
**优先级**：最高  
**风险**：中  
**依赖**：2.4  
**预计时间**：2天

**任务**：
- [√] 实现用户注册逻辑
- [√] 实现用户登录逻辑
- [√] 实现JWT Token生成和验证
- [√] 实现密码加密
- [ ] 实现会话管理

**测试**：
- [ ] 单元测试：用户注册
- [ ] 单元测试：用户登录
- [ ] 单元测试：JWT生成和验证
- [ ] 单元测试：密码加密
- [ ] 集成测试：完整认证流程

**输出**：
- 用户认证服务
- 测试用例和测试脚本

---

### 4.2 用户信息收集服务 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：4.1  
**预计时间**：2天

**任务**：
- [√] 实现用户信息保存
- [√] 实现工作履历保存
- [√] 实现项目经历保存
- [√] 实现信息验证
- [ ] 实现信息分析（提取能力、价值观等）

**测试**：
- [ ] 单元测试：信息保存
- [ ] 单元测试：信息验证
- [ ] 单元测试：信息分析
- [ ] 集成测试：完整信息收集流程

**输出**：
- 用户信息收集服务
- 测试用例和测试脚本

---

### 4.3 问题服务 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：2.1  
**预计时间**：2天

**任务**：
- [√] 实现问题加载（从question.md）
- [√] 实现问题查询
- [√] 实现默认引导问题生成
- [√] 实现问题分类

**测试**：
- [ ] 单元测试：问题加载
- [ ] 单元测试：问题查询
- [ ] 单元测试：引导问题生成
- [ ] 集成测试：问题服务

**输出**：
- 问题服务
- 测试用例和测试脚本

---

### 4.4 回答服务 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：2.4  
**预计时间**：2天

**任务**：
- [√] 实现回答保存
- [√] 实现回答查询
- [√] 实现回答更新
- [√] 实现回答验证（字数、内容等）

**测试**：
- [ ] 单元测试：回答保存
- [ ] 单元测试：回答查询
- [ ] 单元测试：回答更新
- [ ] 单元测试：回答验证
- [ ] 集成测试：回答服务

**输出**：
- 回答服务
- 测试用例和测试脚本

---

### 4.5 进度管理服务 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：2.4  
**预计时间**：1天

**任务**：
- [√] 实现进度保存
- [√] 实现进度查询
- [√] 实现进度更新
- [√] 实现进度计算

**测试**：
- [ ] 单元测试：进度保存
- [ ] 单元测试：进度查询
- [ ] 单元测试：进度计算
- [ ] 集成测试：进度管理

**输出**：
- 进度管理服务
- 测试用例和测试脚本

---

### 4.6 引导服务 ⭐ P0
**优先级**：高  
**风险**：中  
**依赖**：3.3, 4.3  
**预计时间**：3天

**任务**：
- [√] 实现主动引导逻辑
- [√] 实现引导策略配置读取
- [√] 实现引导触发检测
- [√] 实现默认引导问题生成
- [√] 实现引导偏好管理

**测试**：
- [ ] 单元测试：引导策略读取
- [ ] 单元测试：触发检测
- [ ] 单元测试：引导问题生成
- [ ] 单元测试：引导偏好管理
- [ ] 集成测试：完整引导流程

**输出**：
- 引导服务
- 测试用例和测试脚本

---

### 4.7 导出服务 ⭐ P1
**优先级**：中  
**风险**：中  
**依赖**：2.4, 2.5  
**预计时间**：3天

**任务**：
- [√] 实现PDF导出
- [√] 实现JSON导出
- [√] 实现Markdown导出
- [√] 实现导出数据收集
- [√] 实现导出格式化

**测试**：
- [ ] 单元测试：PDF生成
- [ ] 单元测试：JSON生成
- [ ] 单元测试：Markdown生成
- [ ] 单元测试：数据收集
- [ ] 集成测试：完整导出流程

**输出**：
- 导出服务
- 测试用例和测试脚本

---

## Phase 5: API接口层

### 5.1 认证API ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：4.1  
**预计时间**：1天

**任务**：
- [ ] 实现注册接口（POST /auth/register）
- [ ] 实现登录接口（POST /auth/login）
- [ ] 实现获取当前用户接口（GET /auth/me）
- [ ] 实现JWT中间件
- [ ] 实现错误处理

**测试**：
- [ ] 单元测试：注册接口
- [ ] 单元测试：登录接口
- [ ] 单元测试：JWT验证
- [ ] 集成测试：完整认证流程

**输出**：
- 认证API
- 测试用例和测试脚本

---

### 5.2 用户信息API ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：4.2  
**预计时间**：1天

**任务**：
- [√] 实现提交用户信息接口（POST /users/profile）
- [ ] 实现更新用户信息接口（PATCH /users/profile）
- [√] 实现获取用户信息接口（GET /users/profile）
- [√] 实现数据验证

**测试**：
- [ ] 单元测试：提交接口
- [ ] 单元测试：更新接口
- [ ] 单元测试：获取接口
- [ ] 集成测试：用户信息管理

**输出**：
- 用户信息API
- 测试用例和测试脚本

---

### 5.3 会话管理API ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：2.4  
**预计时间**：1天

**任务**：
- [√] 实现创建会话接口（POST /sessions）
- [√] 实现获取会话接口（GET /sessions/{id}）
- [√] 实现更新进度接口（PATCH /sessions/{id}/progress）
- [ ] 实现会话恢复逻辑

**测试**：
- [ ] 单元测试：创建会话
- [ ] 单元测试：获取会话
- [ ] 单元测试：更新进度
- [ ] 集成测试：会话管理

**输出**：
- 会话管理API
- 测试用例和测试脚本

---

### 5.4 问题API ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：4.3  
**预计时间**：1天

**任务**：
- [ ] 实现获取问题列表接口（GET /questions）
- [ ] 实现获取单个问题接口（GET /questions/{id}）
- [ ] 实现获取默认引导问题接口（GET /questions/guide-questions）
- [ ] 实现问题建议接口（GET /questions/suggestions）

**测试**：
- [ ] 单元测试：问题列表
- [ ] 单元测试：单个问题
- [ ] 单元测试：引导问题
- [ ] 集成测试：问题API

**输出**：
- 问题API
- 测试用例和测试脚本

---

### 5.5 回答API ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：4.4  
**预计时间**：1天

**任务**：
- [√] 实现提交回答接口（POST /answers）
- [√] 实现更新回答接口（PATCH /answers/{id}）
- [√] 实现获取回答列表接口（GET /answers）
- [√] 实现获取单个回答接口（GET /answers/{id}）

**测试**：
- [ ] 单元测试：提交回答
- [ ] 单元测试：更新回答
- [ ] 单元测试：获取回答
- [ ] 集成测试：回答API

**输出**：
- 回答API
- 测试用例和测试脚本

---

### 5.6 对话API ⭐ P0
**优先级**：最高  
**风险**：高（依赖智能体）  
**依赖**：3.3, 4.6  
**预计时间**：3天

**任务**：
- [√] 实现发送消息接口（POST /chat/messages）
- [√] 实现获取对话历史接口（GET /chat/history）
- [√] 实现主动引导接口（POST /chat/guide）
- [√] 实现引导偏好设置接口（POST /chat/guide-preference）
- [√] 实现对话记录文件写入
- [√] 实现对话分类逻辑

**测试**：
- [ ] 单元测试：发送消息
- [ ] 单元测试：获取历史
- [ ] 单元测试：主动引导
- [ ] 单元测试：对话文件写入
- [ ] 集成测试：完整对话流程（需要LLM API）

**输出**：
- 对话API
- 测试用例和测试脚本

**风险评估**：
- 风险：智能体调用失败
- 缓解：实现错误处理和降级方案

---

### 5.7 内容检索API ⭐ P0
**优先级**：高  
**风险**：低  
**依赖**：2.2  
**预计时间**：1天

**任务**：
- [√] 实现搜索接口（POST /search）
- [√] 实现相似示例接口（GET /search/similar）
- [√] 实现结果格式化

**测试**：
- [ ] 单元测试：搜索接口
- [ ] 单元测试：相似示例
- [ ] 集成测试：检索API

**输出**：
- 内容检索API
- 测试用例和测试脚本

---

### 5.8 语音API（可选） ⭐ P1
**优先级**：中（AUDIO_MODE控制）  
**风险**：中  
**依赖**：1.2, 1.3  
**预计时间**：2天

**任务**：
- [√] 实现ASR接口（POST /audio/transcribe）
- [√] 实现TTS接口（POST /audio/synthesize）
- [√] 实现AUDIO_MODE检查中间件
- [√] 实现音频文件处理

**测试**：
- [ ] 单元测试：ASR接口
- [ ] 单元测试：TTS接口
- [ ] 单元测试：AUDIO_MODE检查
- [ ] 集成测试：语音API（需要API密钥）

**输出**：
- 语音API
- 测试用例和测试脚本

---

### 5.9 公式和流程API ⭐ P0
**优先级**：高  
**风险**：低  
**依赖**：无  
**预计时间**：0.5天

**任务**：
- [√] 实现获取公式接口（GET /formula）
- [√] 实现获取流程图接口（GET /flowchart）
- [√] 实现数据格式化

**测试**：
- [ ] 单元测试：公式接口
- [ ] 单元测试：流程图接口
- [ ] 集成测试：公式API

**输出**：
- 公式和流程API
- 测试用例和测试脚本

---

### 5.10 导出API ⭐ P1
**优先级**：中  
**风险**：中  
**依赖**：4.7  
**预计时间**：2天

**任务**：
- [√] 实现生成结果接口（POST /export/generate）
- [√] 实现导出接口（GET /export/download）
- [ ] 实现导出状态接口（GET /export/status）
- [ ] 实现异步导出（可选）

**测试**：
- [ ] 单元测试：生成结果
- [ ] 单元测试：导出接口
- [ ] 单元测试：导出状态
- [ ] 集成测试：导出API

**输出**：
- 导出API
- 测试用例和测试脚本

---

### 5.11 配置查询API ⭐ P0
**优先级**：高  
**风险**：低  
**依赖**：0.3  
**预计时间**：0.5天

**任务**：
- [√] 实现架构配置查询接口（GET /config/architecture）
- [√] 实现配置数据格式化

**测试**：
- [ ] 单元测试：配置查询
- [ ] 集成测试：配置API

**输出**：
- 配置查询API
- 测试用例和测试脚本

**注意**：已在main.py中实现

---

## Phase 6: 前端基础

### 6.1 前端项目初始化 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：0.1  
**预计时间**：1天

**任务**：
- [ ] 创建React + TypeScript项目
- [ ] 配置Vite构建工具
- [ ] 配置UI库（Ant Design）
- [ ] 配置路由（React Router）
- [ ] 配置状态管理（Zustand）
- [ ] 配置HTTP客户端（Axios）
- [ ] 配置代码规范（ESLint, Prettier）

**测试**：
- [ ] 验证项目启动
- [ ] 验证构建成功

**输出**：
- 前端项目结构
- 配置文件

---

### 6.2 前端类型定义 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：6.1  
**预计时间**：1天

**任务**：
- [ ] 定义API响应类型
- [ ] 定义数据模型类型
- [ ] 定义组件Props类型
- [ ] 定义状态类型
- [ ] 定义配置类型

**测试**：
- [ ] 验证类型定义正确
- [ ] 验证类型检查通过

**输出**：
- TypeScript类型定义文件

---

### 6.3 API服务层 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：6.2  
**预计时间**：2天

**任务**：
- [√] 实现API客户端封装
- [√] 实现认证拦截器
- [√] 实现错误处理
- [ ] 实现请求重试
- [√] 实现所有API接口调用函数

**测试**：
- [ ] 单元测试：API客户端
- [ ] 单元测试：认证拦截器
- [ ] 单元测试：错误处理
- [ ] 集成测试：API调用

**输出**：
- API服务层
- 测试用例和测试脚本

---

### 6.4 状态管理 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：6.2  
**预计时间**：2天

**任务**：
- [√] 实现用户状态Store
- [√] 实现会话状态Store
- [√] 实现进度状态Store
- [ ] 实现对话状态Store
- [ ] 实现UI状态Store
- [√] 实现状态持久化

**测试**：
- [ ] 单元测试：每个Store
- [ ] 单元测试：状态持久化
- [ ] 集成测试：状态管理

**输出**：
- 状态管理模块
- 测试用例和测试脚本

---

## Phase 7: 前端核心功能

### 7.1 认证页面 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：6.3, 6.4  
**预计时间**：2天

**任务**：
- [ ] 实现注册页面
- [ ] 实现登录页面
- [ ] 实现表单验证
- [ ] 实现错误提示
- [ ] 实现路由保护

**测试**：
- [ ] 单元测试：注册表单
- [ ] 单元测试：登录表单
- [ ] 单元测试：表单验证
- [ ] E2E测试：注册登录流程

**输出**：
- 认证页面
- 测试用例和测试脚本

---

### 7.2 用户信息收集页面 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：7.1  
**预计时间**：3天

**任务**：
- [√] 实现基本信息表单（性别、年龄）
- [√] 实现工作履历表单（多段经历）
- [√] 实现项目经历表单（嵌套）
- [√] 实现动态添加/删除
- [√] 实现表单验证
- [ ] 实现自动保存

**测试**：
- [ ] 单元测试：基本信息表单
- [ ] 单元测试：工作履历表单
- [ ] 单元测试：动态表单
- [ ] 单元测试：表单验证
- [ ] E2E测试：信息收集流程

**输出**：
- 用户信息收集页面
- 测试用例和测试脚本

---

### 7.3 探索流程页面 - 基础布局 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：6.4  
**预计时间**：2天

**任务**：
- [ ] 实现页面布局
- [ ] 实现步骤引导区组件
- [ ] 实现问题展示区组件
- [ ] 实现回答输入区组件
- [ ] 实现对话助手区组件
- [ ] 实现进度展示区组件
- [ ] 实现响应式布局

**测试**：
- [ ] 单元测试：每个组件
- [ ] 单元测试：布局响应式
- [ ] 集成测试：页面布局

**输出**：
- 探索流程页面基础布局
- 测试用例和测试脚本

---

### 7.4 步骤引导组件 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：7.3  
**预计时间**：1天

**任务**：
- [ ] 实现步骤列表显示
- [ ] 实现当前步骤高亮
- [ ] 实现已完成步骤标记
- [ ] 实现步骤切换（如果允许）
- [ ] 实现步骤状态更新

**测试**：
- [ ] 单元测试：步骤显示
- [ ] 单元测试：步骤切换
- [ ] 集成测试：步骤引导

**输出**：
- 步骤引导组件
- 测试用例和测试脚本

---

### 7.5 问题卡片组件 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：7.3  
**预计时间**：2天

**任务**：
- [ ] 实现问题内容显示
- [ ] 实现概念词高亮
- [ ] 实现概念提示（Tooltip）
- [ ] 实现选中文本功能
- [ ] 实现提示信息显示
- [ ] 实现相关示例显示（可选）

**测试**：
- [ ] 单元测试：问题显示
- [ ] 单元测试：概念高亮
- [ ] 单元测试：文本选中
- [ ] 集成测试：问题卡片

**输出**：
- 问题卡片组件
- 测试用例和测试脚本

---

### 7.6 回答输入组件 ⭐ P0
**优先级**：最高  
**风险**：低  
**依赖**：7.3  
**预计时间**：2天

**任务**：
- [ ] 实现多行文本输入
- [ ] 实现字数统计
- [ ] 实现自动保存
- [ ] 实现提交功能
- [ ] 实现输入验证
- [ ] 实现语音输入按钮（AUDIO_MODE控制）

**测试**：
- [ ] 单元测试：文本输入
- [ ] 单元测试：自动保存
- [ ] 单元测试：提交功能
- [ ] 单元测试：输入验证
- [ ] 集成测试：回答输入

**输出**：
- 回答输入组件
- 测试用例和测试脚本

---

### 7.7 默认引导问题组件 ⭐ P0
**优先级**：高  
**风险**：低  
**依赖**：7.3  
**预计时间**：1天

**任务**：
- [ ] 实现引导问题列表显示
- [ ] 实现快速点选功能
- [ ] 实现不同步骤显示不同问题
- [ ] 实现点击发送到对话助手

**测试**：
- [ ] 单元测试：问题列表
- [ ] 单元测试：点选功能
- [ ] 单元测试：问题切换
- [ ] 集成测试：引导问题

**输出**：
- 默认引导问题组件
- 测试用例和测试脚本

---

### 7.8 对话助手组件 ⭐ P0
**优先级**：最高  
**风险**：中  
**依赖**：7.3, 5.6  
**预计时间**：3天

**任务**：
- [ ] 实现对话消息显示
- [ ] 实现消息气泡样式
- [ ] 实现发送消息功能
- [ ] 实现选中文本询问功能
- [ ] 实现相关推荐显示
- [ ] 实现滚动到底部
- [ ] 实现加载状态

**测试**：
- [ ] 单元测试：消息显示
- [ ] 单元测试：发送消息
- [ ] 单元测试：文本选中
- [ ] 集成测试：对话助手

**输出**：
- 对话助手组件
- 测试用例和测试脚本

---

### 7.9 公式展示组件 ⭐ P0
**优先级**：高  
**风险**：低  
**依赖**：7.3  
**预计时间**：1天

**任务**：
- [ ] 实现公式可视化显示
- [ ] 实现元素点击功能
- [ ] 实现元素解释弹窗
- [ ] 实现动画效果

**测试**：
- [ ] 单元测试：公式显示
- [ ] 单元测试：元素点击
- [ ] 集成测试：公式展示

**输出**：
- 公式展示组件
- 测试用例和测试脚本

---

### 7.10 进度条组件 ⭐ P0
**优先级**：高  
**风险**：低  
**依赖**：7.3  
**预计时间**：1天

**任务**：
- [ ] 实现总体进度显示
- [ ] 实现各步骤进度显示
- [ ] 实现百分比显示
- [ ] 实现预计时间显示

**测试**：
- [ ] 单元测试：进度显示
- [ ] 单元测试：进度计算
- [ ] 集成测试：进度条

**输出**：
- 进度条组件
- 测试用例和测试脚本

---

### 7.11 结果页面 ⭐ P1
**优先级**：中  
**风险**：低  
**依赖**：5.10  
**预计时间**：2天

**任务**：
- [ ] 实现结果摘要显示
- [ ] 实现详细分析显示
- [ ] 实现导出功能（PDF/JSON/Markdown三选一）
- [ ] 实现导出状态显示

**测试**：
- [ ] 单元测试：结果显示
- [ ] 单元测试：导出功能
- [ ] 集成测试：结果页面

**输出**：
- 结果页面
- 测试用例和测试脚本

---

## Phase 8: 集成与优化

### 8.1 前后端集成 ⭐ P0
**优先级**：最高  
**风险**：高  
**依赖**：Phase 5, Phase 7  
**预计时间**：3天

**任务**：
- [ ] 前后端联调
- [ ] API接口对接
- [ ] 错误处理统一
- [ ] 数据格式验证
- [ ] 性能优化

**测试**：
- [ ] 集成测试：完整用户流程
- [ ] 集成测试：错误处理
- [ ] 性能测试：响应时间

**输出**：
- 集成测试报告
- 性能测试报告

**风险评估**：
- 风险：前后端接口不匹配
- 缓解：先定义接口文档，前后端并行开发

---

### 8.2 智能体集成测试 ⭐ P0
**优先级**：最高  
**风险**：高  
**依赖**：3.3, 5.6  
**预计时间**：2天

**任务**：
- [ ] 测试智能体完整流程
- [ ] 测试工具调用
- [ ] 测试ReAct循环
- [ ] 测试错误处理
- [ ] 测试性能

**测试**：
- [ ] 集成测试：智能体流程
- [ ] 集成测试：工具调用
- [ ] 性能测试：响应时间
- [ ] 压力测试：并发请求

**输出**：
- 智能体集成测试报告

---

### 8.3 用户体验优化 ⭐ P1
**优先级**：中  
**风险**：低  
**依赖**：8.1  
**预计时间**：2天

**任务**：
- [ ] 优化加载状态
- [ ] 优化错误提示
- [ ] 优化交互反馈
- [ ] 优化响应式布局
- [ ] 优化性能

**测试**：
- [ ] 用户体验测试
- [ ] 性能测试

**输出**：
- 优化报告

---

### 8.4 部署准备 ⭐ P0
**优先级**：高  
**风险**：中  
**依赖**：8.1  
**预计时间**：2天

**任务**：
- [ ] 编写Dockerfile
- [ ] 编写docker-compose.yml（简化架构）
- [ ] 配置环境变量
- [ ] 配置HTTPS（生产环境）
- [ ] 编写部署文档

**测试**：
- [ ] 测试Docker构建
- [ ] 测试容器运行
- [ ] 测试部署流程

**输出**：
- Docker配置
- 部署文档

---

## 📊 开发顺序建议

### 推荐顺序（基于风险和依赖）

```
Phase 0: 基础设施
  ↓
Phase 1: LLM API（核心，高风险）
  ↓
Phase 2: 知识库（依赖LLM）
  ↓
Phase 3: 智能体框架（依赖LLM和知识库）
  ↓
Phase 4: 业务逻辑（依赖数据层）
  ↓
Phase 5: API接口（依赖业务逻辑）
  ↓
Phase 6: 前端基础（可并行）
  ↓
Phase 7: 前端功能（依赖API）
  ↓
Phase 8: 集成测试
```

### 关键路径

1. **LLM API** → 智能体框架 → 对话API（核心路径）
2. **数据库** → 业务逻辑 → API接口（数据路径）
3. **前端基础** → 前端功能 → 集成（前端路径）

### 可并行开发

- Phase 1 (ASR/TTS) 可与 Phase 1 (LLM) 并行
- Phase 2 (知识库) 可与 Phase 4 (部分业务逻辑) 并行
- Phase 6 (前端基础) 可与 Phase 5 (API) 并行开发

---

## ⚠️ 风险评估

### 高风险任务

1. **LLM API集成** (1.1)
   - 风险：API调用失败、成本控制
   - 缓解：实现降级方案、成本监控、错误重试

2. **LangGraph智能体框架** (3.1, 3.2)
   - 风险：学习曲线、循环控制复杂
   - 缓解：先实现简单示例、逐步扩展、充分测试

3. **ReAct范式实现** (3.2)
   - 风险：循环逻辑复杂、可能无限循环
   - 缓解：最大迭代次数限制、超时控制、充分测试

4. **前后端集成** (8.1)
   - 风险：接口不匹配、数据格式问题
   - 缓解：先定义接口文档、前后端并行开发、充分测试

### 中风险任务

1. **ASR/TTS API** (1.2, 1.3)
   - 风险：音频处理、格式转换
   - 缓解：使用成熟库、充分测试

2. **对话API** (5.6)
   - 风险：智能体调用失败
   - 缓解：错误处理、降级方案

3. **导出服务** (4.7, 5.10)
   - 风险：大文件生成、性能问题
   - 缓解：异步处理、流式生成

---

## 🧪 测试策略

### 测试层次

1. **单元测试**：每个模块独立测试
2. **集成测试**：模块间协作测试
3. **E2E测试**：完整用户流程测试
4. **性能测试**：响应时间和并发测试

### 测试优先级

- **P0模块**：必须有完整测试
- **P1模块**：至少单元测试
- **P2模块**：基础测试

### 测试覆盖率目标

- 核心模块：> 80%
- 业务逻辑：> 70%
- API接口：> 60%

---

## 📝 开发规范

### 代码规范

- **Python**：black, flake8, mypy
- **TypeScript**：ESLint, Prettier
- **提交规范**：Conventional Commits

### 文档要求

- 每个模块必须有README
- 复杂逻辑必须有注释
- API必须有文档

### 代码审查

- 所有代码必须经过审查
- 高风险模块必须详细审查

---

## 🎯 里程碑

### Milestone 1: 核心AI服务完成
- LLM API可用
- 知识库加载完成
- 预计时间：1周

### Milestone 2: 智能体框架完成
- LangGraph框架搭建
- ReAct范式实现
- 工具定义完成
- 预计时间：2周

### Milestone 3: 后端API完成
- 所有API接口实现
- 业务逻辑完成
- 预计时间：2周

### Milestone 4: 前端功能完成
- 所有页面实现
- 所有组件实现
- 预计时间：2周

### Milestone 5: 集成测试完成
- 前后端集成
- 完整流程测试
- 预计时间：1周

**总计预计时间**：8周（2个月）

---

## 📌 注意事项

1. **完整架构**：只保留接口，暂不实现
2. **对话记录**：使用JSON文件，不存数据库表
3. **测试优先**：所有可测试模块都要有测试
4. **接口兼容**：保持接口兼容性，便于未来扩展
5. **文档同步**：代码和文档同步更新
6. **任务标记**：使用 √ 标记完成，× 标记错误/无法实现

---

## 🔧 环境配置

在开始开发前，请先配置开发环境：

1. **查看依赖清单**: `DEPENDENCIES.md`
2. **运行环境配置脚本**:
   - Windows: `.\setup_env.ps1`
   - Linux/Mac: `./setup_env.sh`
3. **手动配置**: 参考 `DEPENDENCIES.md` 中的详细步骤

---

**最后更新**：2024-01-01  
**版本**：v1.0.0
